@page
@model TimeLog.Pages.Activities.IndexModel

@{
    ViewData["Title"] = "Index";
}
<svg class="defs-only" xmlns="http://www.w3.org/2000/svg">
    <linearGradient id="coin" x2="50%" y2="40%" spreadMethod="reflect">
        <stop stop-color="gold" offset="30%" />
        <stop stop-color="goldenrod" offset="70%" />
        <stop stop-color="white" offset="82%" />
        <stop stop-color="gold" offset="92%" />
        <stop stop-color="darkgoldenrod" offset="100%" />
    </linearGradient>
    <radialGradient id="pot" fx="30%" fy="35%">
        <stop stop-color="white" offset="0%" />
        <stop stop-color="gold" offset="15%" />
        <stop stop-color="goldenrod" offset="80%" />
        <stop stop-color="darkgoldenrod" offset="100%" />
    </radialGradient>
    <symbol id="potofgold">
        <g fill="url(#coin)" stroke="darkgoldenrod" stroke-width="0.5">
            <circle r="5" transform="translate(30,7)" />
            <circle r="5" transform="translate(35,13)" />
            <circle r="5" transform="translate(22,10)" />
            <circle r="5" transform="translate(27,9)" />
            <circle r="5" transform="translate(18,17)" />
            <circle r="5" transform="translate(42,18)" />
            <circle r="5" transform="translate(32,19)" />
            <circle r="5" transform="translate(30,14)" />
            <circle r="5" transform="translate(25,15)" />
            <circle r="5" transform="translate(37,19)" />
            <circle r="5" transform="translate(31,16)" />
            <circle r="5" transform="translate(20,18)" />
            <circle r="5" transform="translate(26,21)" />
        </g>
        <path fill="url(#pot)" stroke="#751" stroke-width="0.5"
              d="M30,50 C45,50 55,45 55,35
                 Q 55,27 50,25 C55,22 53,15 45,20
                 S 23,25 15,20 S5,22 10,25
                 Q 5,27 5,35 C5,45 15,50 30,50Z" />
    </symbol>
</svg>
<svg class="defs-only" id="glyphicons-basic" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
    <symbol id="selecticon">
        <path id="chevron-right" d="M23.32849,16.70709,13.12115,26.91425a.50007.50007,0,0,1-.70715,0l-2.82806-2.8285a.5.5,0,0,1,0-.70709L16.96436,16,9.58594,8.62134a.5.5,0,0,1,0-.70709L12.414,5.08575a.50007.50007,0,0,1,.70715,0L23.32849,15.29291A.99988.99988,0,0,1,23.32849,16.70709Z" />
    </symbol>
    <symbol id="deleteicon">
        <path id="square-empty-remove" d="M24.5,4H7.5A3.50424,3.50424,0,0,0,4,7.5v17A3.50424,3.50424,0,0,0,7.5,28h17A3.50424,3.50424,0,0,0,28,24.5V7.5A3.50424,3.50424,0,0,0,24.5,4ZM25,24.5a.50641.50641,0,0,1-.5.5H7.5a.50641.50641,0,0,1-.5-.5V7.5A.50641.50641,0,0,1,7.5,7h17a.50641.50641,0,0,1,.5.5ZM21.30328,13.52515,18.82843,16l2.47485,2.47485a.50007.50007,0,0,1,0,.70716L19.182,21.30328a.50007.50007,0,0,1-.70716,0L16,18.82843l-2.47485,2.47485a.50007.50007,0,0,1-.70716,0L10.69672,19.182a.50007.50007,0,0,1,0-.70716L13.17157,16l-2.47485-2.47485a.50007.50007,0,0,1,0-.70716L12.818,10.69672a.50007.50007,0,0,1,.70716,0L16,13.17157l2.47485-2.47485a.50007.50007,0,0,1,.70716,0L21.30328,12.818A.50007.50007,0,0,1,21.30328,13.52515Z" />
    </symbol>
    <symbol id="editicon">
        <path id="pencil" d="M27.414,8.82812l-2.08588,2.08594L21.08588,6.67188l2.08587-2.08594a.99985.99985,0,0,1,1.41425,0l2.828,2.82812A.99986.99986,0,0,1,27.414,8.82812ZM8.08594,19.67188l4.24218,4.24218L23.91406,12.32812,19.67181,8.08594ZM4.27667,27.09863a.50005.50005,0,0,0,.62476.62476l5.92773-2.48023L6.75677,21.1709Z" />
    </symbol>
</svg>

<h1>Index</h1>

<div class="d-flex">
    <div class="p-2 bg-primary"><a asp-page="Create" class="btn btn-link" style="color: white;">Create New</a></div>
    <div class="p-2 bg-primary flex-grow-1"><form method="post"><button type="submit" class="btn btn-link" style="color: white;" asp-page-handler="Export">Export</button></form></div>
</div>
<table class="table activity">
    <thead>
        <tr>
            <th></th>
            <th></th>
            <th>Date</th>
            <th>Duration</th>
            <th>
                @Html.DisplayNameFor(model => model.ActivityEntity[0].ActivityTypeId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ActivityEntity[0].Tasks)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ActivityEntity[0].Project)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ActivityEntity[0].Client)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ActivityEntity[0].Billable)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.ActivityEntity)
        {
            <tr>
                <td>
                    <a asp-page="./Details" asp-route-id="@item.Id">
                        <svg class="icon">
                            <use xlink:href="#selecticon" />
                        </svg>
                    </a>
                </td>
                <td>
                    <a asp-page="./Edit" asp-route-id="@item.Id">
                        <svg class="icon">
                            <use xlink:href="#editicon" />
                        </svg>
                    </a>
                </td>
                <td>
                    <span style="white-space: nowrap">
                        @item.Date.ToString("yyyy/MM/dd")&nbsp;&nbsp;
                        <span style="white-space: nowrap">
                            @item.StartTime.ToString("HH:mm")-
                            @if (item.EndTime.HasValue)
                            {
                                @item.EndTime.Value.ToString("HH:mm")
                            }
                        </span>
                    </span>
                </td>
                <td>
                    @if (item.EndTime.HasValue)
                    {
                        @item.EndTime.Value.Subtract(@item.StartTime)
                    }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ActivityType.Name)
                </td>
                <td>
                    @Html.Raw(item.Tasks)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Project.Name)
                </td>
                <td>
                    <span style="white-space: nowrap">@Html.DisplayFor(modelItem => item.Client.Name)</span>
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Billable)
                </td>
                <td>
                    @if (item.EndTime == null)
                    {
                        <a asp-page-handler="Close" asp-route-id="@item.Id">Close Entry</a>
                    }
                </td>
                <td>
                    <span style="white-space: nowrap;">
                        <a asp-page="./Delete" asp-route-id="@item.Id">
                            <svg class="icon">
                                <use xlink:href="#deleteicon" />
                            </svg>
                        </a>
                    </span>
                </td>
            </tr>
        }
    </tbody>
</table>